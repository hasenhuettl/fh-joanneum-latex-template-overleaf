%****************************************
% 00_preamble
%****************************************

% import Latex packages
\usepackage{ifthen}

\usepackage[T1]{fontenc}
\usepackage[utf8]{luainputenc}

% Mathematikpaket
\usepackage{amsmath}
% für die Auswahl von Schriften
\usepackage{fontspec}
% language packages
\usepackage[english, ngerman]{babel}
\usepackage{blindtext}
% für spezifisches Layout 
\usepackage{geometry}
\usepackage{layout}
\usepackage{setspace}
% erweiterte Möglichkeiten für die Positionierung von Bildern, Tabellen, ..
\usepackage{float}
% Blocksatz verbessern bei pdf Erzeugung
\usepackage{microtype} 	
% Kapitelüberschrift bei Querverweisen anzeigen
\usepackage{nameref}
% Ermöglichen, Grafiken nebeneinander und innerhalb einer Grafik zu platzieren
\usepackage{subfig}				
% Einfügen von PDF Dateien
\usepackage{pdfpages}
% Anmerkungen im Text
\usepackage{todonotes}
% für Code
\usepackage{listings}
% für Tabellen
\usepackage{array}
% Farbdefinitionen
\usepackage{color}
% PDF
\usepackage[unicode=true,pdfusetitle,
  bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
  breaklinks=true,pdfborder={0 0 1},backref=false,colorlinks=true
]{hyperref}
\hypersetup{
  linkcolor=black, % set the color for internal links
  citecolor=black, % set the color for citation links
  urlcolor=blue    % set the color for URLs
}

% kleinere Überschriften
\KOMAoptions{headings=small}
% Konfiguration des Inhaltsverzeichnisses
\KOMAoptions{toc=listof}
\KOMAoptions{toc=bib}

% --- Creating the acronym page
\usepackage{datatool}
\usepackage[printonlyused]{acronym}

% --- Insert pagebreaks if there is not enough space for new sections
\usepackage{needspace}

\newcommand{\needspacelength}{\needspace{\yourNeedSpaceLength\baselineskip}}

% Redefine \section, \subsection, and \subsubsection to include \myneedspacelength
% Refer to https://tex.stackexchange.com/a/47372
\NewCommandCopy{\oldsection}{\section}
\NewCommandCopy{\oldsubsection}{\subsection}
\NewCommandCopy{\oldsubsubsection}{\subsubsection}

\renewcommand{\section}[1]{\needspacelength\oldsection{#1}}
\renewcommand{\subsection}[1]{\needspacelength\oldsubsection{#1}}
\renewcommand{\subsubsection}[1]{\needspacelength\oldsubsubsection{#1}}

% --- Imports the biblatex package
% For sorting options refer to https://tex.stackexchange.com/a/51439
\usepackage{csquotes}
\usepackage[
backend=biber,
style=numeric,
sorting=none
]{biblatex}
\addbibresource{chapters/95_biblatex.bib}

% Carlito (Unix) or Calibri as default font
\setmainfont{\defaultFont{}}

% Kein Einrücken der ersten Zeile eines Absatzes, dafür
% kleiner Abstand zwischen den Absätzen
\setlength{\parskip}{\smallskipamount}
\setlength{\parindent}{0pt}

% keine Einrückung der Texte bei Bildunterschriften
\usepackage{caption} 
\captionsetup{format=plain} 

\makeatletter

% Alle Nummerierungen kapitelweise (chapter)
\numberwithin{figure}{chapter}
\numberwithin{equation}{chapter}
\numberwithin{table}{chapter}

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

% Aktuelles Datum initialisieren (falls benötigt)
\@ifundefined{date}{}{\date{}}

\makeatother

% Definition der Ränder
\geometry{paperheight=297mm, 
	paperwidth=210mm,
	top=25mm,
	textwidth=155mm,
	textheight=252mm,
	right=25mm,
	heightrounded,
	headheight=5mm,
	headsep=10mm,
	foot=15mm,
	marginparsep=0mm,
	marginparwidth=20mm
}